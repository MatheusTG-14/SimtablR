<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Introduction to SimtablR: Tables Made Simple • SimtablR</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Introduction to SimtablR: Tables Made Simple">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">SimtablR</a>

    <small class="nav-text text-default me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">1.0.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../index.html">Home</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/tb_tutorial.html">Introduction to SimtablR</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">News</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/MatheusTG-14/SimtablR"><span class="fa fa-github"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">



<link href="tb_tutorial_files/tabwid-1.1.3/tabwid.css" rel="stylesheet">
<script src="tb_tutorial_files/tabwid-1.1.3/tabwid.js"></script><div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Introduction to SimtablR: Tables Made Simple</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/MatheusTG-14/SimtableR/blob/HEAD/vignettes/tb_tutorial.Rmd" class="external-link"><code>vignettes/tb_tutorial.Rmd</code></a></small>
      <div class="d-none name"><code>tb_tutorial.Rmd</code></div>
    </div>

    
    
<div class="section level3">
<h3 id="welcome-to-simtablr">Welcome to SimtablR!<a class="anchor" aria-label="anchor" href="#welcome-to-simtablr"></a>
</h3>
<p><strong>SimtblR</strong> is a lightweight package that brings
together three essential tools for epidemiologic analysis:</p>
<ul>
<li>
<strong><code><a href="../reference/tb.html">tb()</a></code></strong> – Create publication-ready
descriptive tables</li>
<li>
<strong><code><a href="../reference/diag_test.html">diag_test()</a></code></strong> – Evaluate diagnostic test
performance</li>
<li>
<strong><code><a href="../reference/regtab.html">regtab()</a></code></strong> – Generate multi-outcome
regression tables</li>
</ul>
<p>Let’s explore each function through practical examples using a
realistic dataset.</p>
<hr>
</div>
<div class="section level3">
<h3 id="getting-started">Getting Started<a class="anchor" aria-label="anchor" href="#getting-started"></a>
</h3>
<p>First, load the package and example data:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/MatheusTG-14/SimtableR" class="external-link">SimtablR</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">── SimtablR 1.0.0 ───────────────────── Simple R functions for usefull tables ──</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> <span style="color: #0000BB;">tb()</span><span style="color: #BBBBBB;">: Descriptive tables (One-Table)</span></span></span>
<span><span class="co"><span style="color: #BBBBBB;">#&gt; </span><span style="color: #00BB00;">✔</span> <span style="color: #0000BB;">diag_test()</span><span style="color: #BBBBBB;">: Confusion matrix and Diagnostic Values</span></span></span>
<span><span class="co"><span style="color: #BBBBBB;">#&gt; </span><span style="color: #00BB00;">✔</span> <span style="color: #0000BB;">regtab()</span><span style="color: #BBBBBB;">: Regression Tables by Outcome (GLM)</span></span></span>
<span><span class="co">#&gt; <span style="color: #555555;">Use suppressPackageStartupMessages() to silence.</span></span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">epitabl</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="example-data">Example Data<a class="anchor" aria-label="anchor" href="#example-data"></a>
</h3>
<p>The <code>epitabl</code> dataset comes from a hypothetical
cross-sectional study of 500 adults examining risk factors for a chronic
disease. Let’s get acquainted:</p>
<p>Our study includes demographics (age, sex, education), health
behaviors (smoking, exercise), clinical measures (BMI, blood pressure,
cholesterol), and outcomes (disease status, healthcare utilization,
hospitalization).</p>
<p><strong>A note on the disease</strong>: About 30% of participants
have the disease, making this a realistic prevalence for many chronic
conditions:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/tb.html">tb</a></span><span class="op">(</span><span class="va">epitabl</span>, <span class="va">disease</span><span class="op">)</span></span>
<span><span class="co">#&gt;  Disease status (primary outcome) | Freq </span></span>
<span><span class="co">#&gt; ----------------------------------+------</span></span>
<span><span class="co">#&gt;                                No | 331  </span></span>
<span><span class="co">#&gt;                               Yes | 169</span></span></code></pre></div>
<hr>
</div>
<div class="section level2">
<h2 id="part-1-descriptive-tables-with-tb">Part 1: Descriptive Tables with <code>tb()</code><a class="anchor" aria-label="anchor" href="#part-1-descriptive-tables-with-tb"></a>
</h2>
<p>The tb() function is the Swiss Army knife of SimtablR. It is designed
to replace the base R table() function for a good part of your
workflow.</p>
<p>It handles:</p>
<ol style="list-style-type: decimal">
<li>Counts and Percentages (Row, Column, Total)</li>
<li>Statistical Tests (Chi-squared, Fisher, McNemar)</li>
<li>Effect Measures (Prevalence Ratios, Odds Ratios)</li>
<li>Stratification (3-way tables)</li>
<li>Formatting for publication (Flextable integration)</li>
</ol>
<div class="section level3">
<h3 id="univariate-tables-frequency">1. Univariate Tables (Frequency)<a class="anchor" aria-label="anchor" href="#univariate-tables-frequency"></a>
</h3>
<p>The simplest use case is checking the distribution of a single
variable. By default, tb() shows counts and percentages.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Distribution of Smoking Status</span></span>
<span><span class="fu"><a href="../reference/tb.html">tb</a></span><span class="op">(</span><span class="va">epitabl</span>, <span class="va">smoking</span><span class="op">)</span></span>
<span><span class="co">#&gt;  Smoking status | Freq </span></span>
<span><span class="co">#&gt; ----------------+------</span></span>
<span><span class="co">#&gt;           Never | 244  </span></span>
<span><span class="co">#&gt;          Former | 158  </span></span>
<span><span class="co">#&gt;         Current |  98</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="bivariate-tables-cross-tabulation">2.Bivariate Tables (Cross-Tabulation)<a class="anchor" aria-label="anchor" href="#bivariate-tables-cross-tabulation"></a>
</h3>
<p>The first variable is always the line and the second variable is the
column. Let’s examine disease prevalence by smoking status:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Disease status by Sex</span></span>
<span><span class="fu"><a href="../reference/tb.html">tb</a></span><span class="op">(</span><span class="va">epitabl</span>, <span class="va">smoking</span>, <span class="va">disease</span><span class="op">)</span></span>
<span><span class="co">#&gt;                 | Disease status (primary outcome) </span></span>
<span><span class="co">#&gt;  Smoking status | No   Yes | Sum </span></span>
<span><span class="co">#&gt; ----------------+----------+-----</span></span>
<span><span class="co">#&gt;           Never | 179  65  | 244 </span></span>
<span><span class="co">#&gt;          Former | 107  51  | 158 </span></span>
<span><span class="co">#&gt;         Current | 45   53  | 98  </span></span>
<span><span class="co">#&gt; ----------------+----------+-----</span></span>
<span><span class="co">#&gt;             Sum | 331  169 | 500</span></span></code></pre></div>
<p>You can control which percentage is calculated using the flags col
(column %), row (row %), or p (total %). If you need to be more
specific, add or remove decimal places using <code>d</code> (d for
decimal!)</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Disease status by Sex</span></span>
<span><span class="fu"><a href="../reference/tb.html">tb</a></span><span class="op">(</span><span class="va">epitabl</span>, <span class="va">smoking</span>, <span class="va">disease</span>, <span class="va">row</span>, d <span class="op">=</span><span class="fl">3</span><span class="op">)</span></span>
<span><span class="co">#&gt;                 |   Disease status (primary outcome)   </span></span>
<span><span class="co">#&gt;  Smoking status |      No            Yes      | Sum </span></span>
<span><span class="co">#&gt; ----------------+-----------------------------+-----</span></span>
<span><span class="co">#&gt;           Never | 179 (73.361%)  65 (26.639%) | 244 </span></span>
<span><span class="co">#&gt;          Former | 107 (67.722%)  51 (32.278%) | 158 </span></span>
<span><span class="co">#&gt;         Current | 45 (45.918%)   53 (54.082%) | 98  </span></span>
<span><span class="co">#&gt; ----------------+-----------------------------+-----</span></span>
<span><span class="co">#&gt;             Sum |      331           169      | 500</span></span></code></pre></div>
<div class="section level4">
<h4 id="style-table-vales">Style table vales<a class="anchor" aria-label="anchor" href="#style-table-vales"></a>
</h4>
<p>Use the style argument to change how numbers are presented. Common
formats are n (pct) or pct (n). use <code>{p}</code> or <code>{n}</code>
to display percentages and frequency, respectively. Using them you can,
for example, have the percentages outiside the parenthesis and frquency
inside:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Showing "% (n)"</span></span>
<span><span class="fu"><a href="../reference/tb.html">tb</a></span><span class="op">(</span><span class="va">epitabl</span>, <span class="va">smoking</span>, <span class="va">disease</span>, <span class="va">row</span>, style <span class="op">=</span> <span class="st">"{p}% ({n})"</span><span class="op">)</span></span>
<span><span class="co">#&gt;                 | Disease status (primary outcome) </span></span>
<span><span class="co">#&gt;  Smoking status |     No          Yes     | Sum </span></span>
<span><span class="co">#&gt; ----------------+-------------------------+-----</span></span>
<span><span class="co">#&gt;           Never | 73.4% (179)  26.6% (65) | 244 </span></span>
<span><span class="co">#&gt;          Former | 67.7% (107)  32.3% (51) | 158 </span></span>
<span><span class="co">#&gt;         Current | 45.9% (45)   54.1% (53) | 98  </span></span>
<span><span class="co">#&gt; ----------------+-------------------------+-----</span></span>
<span><span class="co">#&gt;             Sum |     331         169     | 500</span></span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="adding-statistical-evidence">Adding Statistical Evidence<a class="anchor" aria-label="anchor" href="#adding-statistical-evidence"></a>
</h3>
<p>Is there a real association, or could this pattern occur by
chance?</p>
<p>Set test = TRUE to automatically calculate a p-value (Chi-squared or
Fisher’s exact test, depending on sample size). You can also determine
it manually. For frequency tables, you can set <code>"chsqr"</code>
(Pearson’s Chi-squared), <code>"fisher"</code> (Fisher’s Exact Test) or
<code>"mcnemar"</code> (McNemar).</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/tb.html">tb</a></span><span class="op">(</span><span class="va">epitabl</span>, <span class="va">smoking</span>, <span class="va">disease</span>, <span class="va">col</span>, test<span class="op">=</span> <span class="st">"chsqr"</span><span class="op">)</span> <span class="co">#could also use test= TRUE</span></span>
<span><span class="co">#&gt;                 | Disease status (primary outcome) </span></span>
<span><span class="co">#&gt;  Smoking status |     No          Yes     | Sum </span></span>
<span><span class="co">#&gt; ----------------+-------------------------+-----</span></span>
<span><span class="co">#&gt;           Never | 179 (54.1%)  65 (38.5%) | 244 </span></span>
<span><span class="co">#&gt;          Former | 107 (32.3%)  51 (30.2%) | 158 </span></span>
<span><span class="co">#&gt;         Current | 45 (13.6%)   53 (31.4%) | 98  </span></span>
<span><span class="co">#&gt; ----------------+-------------------------+-----</span></span>
<span><span class="co">#&gt;             Sum |     331         169     | 500 </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   Test: Pearson's Chi-squared test   p-value &lt; 0.001</span></span></code></pre></div>
<p>We see something interesting. The prevalence varies across smoking
groups, and the p-value suggests this is unlikely due to chance
alone.</p>
</div>
<div class="section level3">
<h3 id="prevalence-ratios-pr-and-odds-ratios-or">Prevalence Ratios (PR) and Odds Ratios (OR)<a class="anchor" aria-label="anchor" href="#prevalence-ratios-pr-and-odds-ratios-or"></a>
</h3>
<p>In cross-sectional studies, we often want the Prevalence Ratio (PR).
In case-control studies, the Odds Ratio (OR). <code><a href="../reference/tb.html">tb()</a></code>
calculates these with confidence intervals automatically.</p>
<p>Now that we know that the prevalence of disease is significantly
different across smoking categories, we can explore them with
<code>or</code> OR or <code>pr</code> PR:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Calculate Prevalence Ratio of Disease by Smoking status</span></span>
<span><span class="fu"><a href="../reference/tb.html">tb</a></span><span class="op">(</span><span class="va">epitabl</span>, <span class="va">smoking</span>, <span class="va">disease</span>, <span class="va">col</span>, </span>
<span>   test <span class="op">=</span> <span class="cn">TRUE</span>, </span>
<span>   <span class="va">rp</span>,            <span class="co"># Calculates Prevalence Ratios; change for or to get ORs</span></span>
<span>   ref <span class="op">=</span> <span class="st">"Never"</span>,     <span class="co"># Reference level for smoking group</span></span>
<span>   conf.level <span class="op">=</span> <span class="fl">0.95</span><span class="op">)</span> <span class="co"># Define the level of confidence (0.95 by default)    </span></span>
<span><span class="co">#&gt;                 | Disease status (primary outcome) </span></span>
<span><span class="co">#&gt;  Smoking status |     No          Yes     | Sum |    PR (95% CI)     </span></span>
<span><span class="co">#&gt; ----------------+-------------------------+-----+--------------------</span></span>
<span><span class="co">#&gt;           Never | 179 (54.1%)  65 (38.5%) | 244 |     1.00 (Ref)     </span></span>
<span><span class="co">#&gt;          Former | 107 (32.3%)  51 (30.2%) | 158 | 1.21 (0.89 - 1.65) </span></span>
<span><span class="co">#&gt;         Current | 45 (13.6%)   53 (31.4%) | 98  | 2.03 (1.54 - 2.68) </span></span>
<span><span class="co">#&gt; ----------------+-------------------------+-----+--------------------</span></span>
<span><span class="co">#&gt;             Sum |     331         169     | 500 |                    </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   Test: Pearson's Chi-squared test   p-value &lt; 0.001</span></span></code></pre></div>
<p><em>Note: Without <code>ref</code>, the function uses the first
factor level alphabetically. You can look at the levels of any variable
using levels(epitabl$smoking)</em></p>
</div>
<div class="section level3">
<h3 id="continuous-variables">Continuous Variables<a class="anchor" aria-label="anchor" href="#continuous-variables"></a>
</h3>
<p>For continuous variables like age or blood pressure, we need to tell
<code><a href="../reference/tb.html">tb()</a></code> to treat them differently:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/tb.html">tb</a></span><span class="op">(</span><span class="va">epitabl</span>, <span class="va">age</span>, <span class="va">disease</span>, var.type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>age <span class="op">=</span> <span class="st">"continuous"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;                     |     Disease status (primary outcome)      </span></span>
<span><span class="co">#&gt;        Age in years |         No                 Yes         </span></span>
<span><span class="co">#&gt; --------------------+----------------------------------------</span></span>
<span><span class="co">#&gt;  age [Median (IQR)] | 49.0 (40.7 - 56.6)  55.9 (48.2 - 61.8) </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;                     | Disease status (primary outcome) </span></span>
<span><span class="co">#&gt;        Age in years |       Total        </span></span>
<span><span class="co">#&gt; --------------------+--------------------</span></span>
<span><span class="co">#&gt;  age [Median (IQR)] | 51.2 (43.1 - 58.3)</span></span></code></pre></div>
<p>By default, you get the <strong>median and interquartile
range</strong> (IQR)—robust statistics that aren’t thrown off by
outliers. If you prefer mean and standard deviation:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/tb.html">tb</a></span><span class="op">(</span><span class="va">epitabl</span>, <span class="va">systolic_bp</span>, <span class="va">disease</span>, </span>
<span>   var.type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>systolic_bp <span class="op">=</span> <span class="st">"continuous"</span><span class="op">)</span>,</span>
<span>   stat.cont <span class="op">=</span> <span class="st">"mean"</span><span class="op">)</span></span>
<span><span class="co">#&gt;                                 |       Disease status (primary outcome)       </span></span>
<span><span class="co">#&gt;  Systolic blood pressure (mmHg) |      No           Yes      |    Total     </span></span>
<span><span class="co">#&gt; --------------------------------+----------------------------+--------------</span></span>
<span><span class="co">#&gt;         systolic_bp [Mean (SD)] | 111.6 (10.0)  123.1 (12.0) | 115.5 (12.0)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="stratification">Stratification<a class="anchor" aria-label="anchor" href="#stratification"></a>
</h3>
<p>You can add a third layer of complexity by stratifying the table. For
example, let’s look at the relationship between Disease and Smoking, but
separated by Sex.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/tb.html">tb</a></span><span class="op">(</span><span class="va">epitabl</span>, <span class="va">disease</span>, <span class="va">smoking</span>, <span class="va">col</span>, strat <span class="op">=</span> <span class="va">sex</span>, test <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt;                                   |           Smoking status           </span></span>
<span><span class="co">#&gt;  Disease status (primary outcome) | Female : Never  Female : Former </span></span>
<span><span class="co">#&gt; ----------------------------------+---------------------------------</span></span>
<span><span class="co">#&gt;                                No |   92 (76.7%)      52 (64.2%)    </span></span>
<span><span class="co">#&gt;                               Yes |   28 (23.3%)      29 (35.8%)    </span></span>
<span><span class="co">#&gt; ----------------------------------+---------------------------------</span></span>
<span><span class="co">#&gt;                               Sum |      120              81        </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;                                   |          Smoking status           </span></span>
<span><span class="co">#&gt;  Disease status (primary outcome) | Female : Current  Male : Never </span></span>
<span><span class="co">#&gt; ----------------------------------+--------------------------------</span></span>
<span><span class="co">#&gt;                                No |    21 (38.9%)      87 (70.2%)  </span></span>
<span><span class="co">#&gt;                               Yes |    33 (61.1%)      37 (29.8%)  </span></span>
<span><span class="co">#&gt; ----------------------------------+--------------------------------</span></span>
<span><span class="co">#&gt;                               Sum |        54             124      </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;                                   |             Smoking status             </span></span>
<span><span class="co">#&gt;  Disease status (primary outcome) | Male : Former  Male : Current | Sum </span></span>
<span><span class="co">#&gt; ----------------------------------+-------------------------------+-----</span></span>
<span><span class="co">#&gt;                                No |  55 (71.4%)      24 (54.5%)   | 331 </span></span>
<span><span class="co">#&gt;                               Yes |  22 (28.6%)      20 (45.5%)   | 169 </span></span>
<span><span class="co">#&gt; ----------------------------------+-------------------------------+-----</span></span>
<span><span class="co">#&gt;                               Sum |      77              44       | 500 </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   Test: Pearson's Chi-squared test   p-value &lt; 0.001</span></span></code></pre></div>
<p>Currently, the columns now show every combination: Female-Never,
Female-Former, Female-Current, Male-Never, and so on. You can visually
compare patterns across strata. <em>Note: PRs and ORs will not be
calculated in stratified tables. For adjusted estimates accounting for
multiple variables simultaneously, you’ll want regression (see
bellow)</em></p>
</div>
<div class="section level3">
<h3 id="exporting-to-wordpowerpoint">Exporting to Word/PowerPoint<a class="anchor" aria-label="anchor" href="#exporting-to-wordpowerpoint"></a>
</h3>
<p>The output of <code><a href="../reference/tb.html">tb()</a></code> is great for the console, but for
publication, you likely need a polished table. SimtablR integrates
seamlessly with the <a href="https://github.com/davidgohel/flextable" class="external-link">flextable
package</a>.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create a table object</span></span>
<span><span class="va">table</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tb.html">tb</a></span><span class="op">(</span><span class="va">epitabl</span>, <span class="va">smoking</span>, <span class="va">disease</span>, <span class="va">col</span>, </span>
<span>         test <span class="op">=</span> <span class="cn">TRUE</span>, </span>
<span>         <span class="va">rp</span>,            </span>
<span>         ref <span class="op">=</span> <span class="st">"Never"</span>,     </span>
<span>         conf.level <span class="op">=</span> <span class="fl">0.95</span><span class="op">)</span> </span>
<span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ardata-fr.github.io/flextable-book/" class="external-link">flextable</a></span><span class="op">)</span> <span class="co">#load the flextable package to output into word or pptx</span></span>
<span><span class="va">ft</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://davidgohel.github.io/flextable/reference/as_flextable.html" class="external-link">as_flextable</a></span><span class="op">(</span><span class="va">table</span><span class="op">)</span></span>
<span><span class="va">ft</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://davidgohel.github.io/flextable/reference/autofit.html" class="external-link">autofit</a></span><span class="op">(</span><span class="va">ft</span><span class="op">)</span>  <span class="co"># Optional: Adjust column widths</span></span>
<span><span class="va">ft</span></span></code></pre></div>
<div class="tabwid">
<style>.cl-090b300a{}.cl-08f76b4c{font-family:'Arial';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-08ff7990{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-08ff799a{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-08ff79a4{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-08ffcc92{width:1.33in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-08ffcc9c{width:1.117in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-08ffcc9d{width:1.033in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-08ffcc9e{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-08ffcca6{width:1.457in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-08ffcca7{width:1.33in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-08ffcca8{width:1.117in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-08ffccb0{width:1.033in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-08ffccb1{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-08ffccb2{width:1.457in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-08ffccb3{width:1.33in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-08ffccba{width:1.117in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-08ffccbb{width:1.033in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-08ffccc4{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-08ffccc5{width:1.457in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-08ffccc6{width:1.33in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-08ffccce{width:1.117in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-08ffcccf{width:1.033in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-08ffccd0{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-08ffccd1{width:1.457in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-08ffccd2{width:1.33in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-08ffccd8{width:1.117in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-08ffccd9{width:1.033in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-08ffccda{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-08ffcce2{width:1.457in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style>
<table data-quarto-disable-processing="true" class="table cl-090b300a">
<thead>
<tr style="overflow-wrap:break-word;">
<th class="cl-08ffcc92"><p class="cl-08ff7990"><span class="cl-08f76b4c"></span></p></th>
<th colspan="2" class="cl-08ffcc9c"><p class="cl-08ff7990"><span class="cl-08f76b4c">Disease status (primary outcome)</span></p></th>
<th class="cl-08ffcc9e"><p class="cl-08ff7990"><span class="cl-08f76b4c"></span></p></th>
<th class="cl-08ffcca6"><p class="cl-08ff7990"><span class="cl-08f76b4c"></span></p></th>
</tr>
<tr style="overflow-wrap:break-word;">
<th class="cl-08ffcca7"><p class="cl-08ff7990"><span class="cl-08f76b4c">Smoking status</span></p></th>
<th class="cl-08ffcca8"><p class="cl-08ff7990"><span class="cl-08f76b4c">No</span></p></th>
<th class="cl-08ffccb0"><p class="cl-08ff7990"><span class="cl-08f76b4c">Yes</span></p></th>
<th class="cl-08ffccb1"><p class="cl-08ff7990"><span class="cl-08f76b4c">Sum</span></p></th>
<th class="cl-08ffccb2"><p class="cl-08ff7990"><span class="cl-08f76b4c">PR (95% CI)</span></p></th>
</tr>
</thead>
<tbody>
<tr style="overflow-wrap:break-word;">
<td class="cl-08ffccb3"><p class="cl-08ff799a"><span class="cl-08f76b4c">Never</span></p></td>
<td class="cl-08ffccba"><p class="cl-08ff7990"><span class="cl-08f76b4c">179 (54.1%)</span></p></td>
<td class="cl-08ffccbb"><p class="cl-08ff7990"><span class="cl-08f76b4c">65 (38.5%)</span></p></td>
<td class="cl-08ffccc4"><p class="cl-08ff7990"><span class="cl-08f76b4c">244</span></p></td>
<td class="cl-08ffccc5"><p class="cl-08ff7990"><span class="cl-08f76b4c">1.00 (Ref)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-08ffccb3"><p class="cl-08ff799a"><span class="cl-08f76b4c">Former</span></p></td>
<td class="cl-08ffccba"><p class="cl-08ff7990"><span class="cl-08f76b4c">107 (32.3%)</span></p></td>
<td class="cl-08ffccbb"><p class="cl-08ff7990"><span class="cl-08f76b4c">51 (30.2%)</span></p></td>
<td class="cl-08ffccc4"><p class="cl-08ff7990"><span class="cl-08f76b4c">158</span></p></td>
<td class="cl-08ffccc5"><p class="cl-08ff7990"><span class="cl-08f76b4c">1.21 (0.89 - 1.65)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-08ffccb3"><p class="cl-08ff799a"><span class="cl-08f76b4c">Current</span></p></td>
<td class="cl-08ffccba"><p class="cl-08ff7990"><span class="cl-08f76b4c">45 (13.6%)</span></p></td>
<td class="cl-08ffccbb"><p class="cl-08ff7990"><span class="cl-08f76b4c">53 (31.4%)</span></p></td>
<td class="cl-08ffccc4"><p class="cl-08ff7990"><span class="cl-08f76b4c">98</span></p></td>
<td class="cl-08ffccc5"><p class="cl-08ff7990"><span class="cl-08f76b4c">2.03 (1.54 - 2.68)</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-08ffccc6"><p class="cl-08ff799a"><span class="cl-08f76b4c">Sum</span></p></td>
<td class="cl-08ffccce"><p class="cl-08ff7990"><span class="cl-08f76b4c">331</span></p></td>
<td class="cl-08ffcccf"><p class="cl-08ff7990"><span class="cl-08f76b4c">169</span></p></td>
<td class="cl-08ffccd0"><p class="cl-08ff7990"><span class="cl-08f76b4c">500</span></p></td>
<td class="cl-08ffccd1"><p class="cl-08ff7990"><span class="cl-08f76b4c"></span></p></td>
</tr>
</tbody>
<tfoot><tr style="overflow-wrap:break-word;"><td colspan="5" class="cl-08ffccd2"><p class="cl-08ff79a4"><span class="cl-08f76b4c">Pearson's Chi-squared test: p-value &lt; 0.001</span></p></td></tr></tfoot>
</table>
</div>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="fu"><a href="https://davidgohel.github.io/flextable/reference/save_as_docx.html" class="external-link">save_as_docx</a></span><span class="op">(</span><span class="va">ft</span>, path <span class="op">=</span> <span class="st">"Table1.docx"</span><span class="op">)</span> </span>
<span><span class="fu"><a href="https://davidgohel.github.io/flextable/reference/save_as_pptx.html" class="external-link">save_as_pptx</a></span><span class="op">(</span><span class="va">ft</span>, path <span class="op">=</span> <span class="st">"Table1.pptx"</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="part-2-diagnostic-test-evaluation-with-diag_test">Part 2: Diagnostic Test Evaluation with
<code>diag_test()</code><a class="anchor" aria-label="anchor" href="#part-2-diagnostic-test-evaluation-with-diag_test"></a>
</h2>
<p>Imagine you’re evaluating a new rapid diagnostic test for our
disease. The gold standard is laboratory confirmation. Its accurate, but
slow and expensive. Your rapid test is fast and cheap, but is it
accurate enough? Let’s find out!</p>
<div class="section level3">
<h3 id="the-confusion-matrix">The Confusion Matrix<a class="anchor" aria-label="anchor" href="#the-confusion-matrix"></a>
</h3>
<p><code><a href="../reference/diag_test.html">diag_test()</a></code> automates the calculation of Sensitivity,
Specificity, Predictive Values (PPV/NPV), and Likelihood Ratios. Let’s
evaluate the performance of rapid_test against lab_confirmed (Gold
Standard) in our dataset. You must define what constitutes a “Positive”
result in both the test and the reference.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">results</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/diag_test.html">diag_test</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">epitabl</span>,</span>
<span>  test <span class="op">=</span> <span class="va">rapid_test</span>,</span>
<span>  ref <span class="op">=</span> <span class="va">lab_confirmed</span>,</span>
<span>  positive <span class="op">=</span> <span class="st">"Yes"</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; Removed 15 observation(s) with missing values (3.0%).</span></span>
<span><span class="co">#&gt; Auto-detected test positive level: 'Positive'</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">results</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ============================================================</span></span>
<span><span class="co">#&gt;   DIAGNOSTIC TEST EVALUATION</span></span>
<span><span class="co">#&gt; ============================================================</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Sample Size:       485 </span></span>
<span><span class="co">#&gt; Confidence Level:  95% </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Reference Standard (Gold Standard):</span></span>
<span><span class="co">#&gt;   Positive: 'Yes'  |  Negative: 'No'</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Diagnostic Test:</span></span>
<span><span class="co">#&gt;   Positive: 'Positive'  |  Negative: 'Negative'</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ------------------------------------------------------------</span></span>
<span><span class="co">#&gt; Confusion Matrix:</span></span>
<span><span class="co">#&gt; ------------------------------------------------------------</span></span>
<span><span class="co">#&gt;           Ref</span></span>
<span><span class="co">#&gt; Test       Yes  No</span></span>
<span><span class="co">#&gt;   Positive 143  37</span></span>
<span><span class="co">#&gt;   Negative  22 283</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ============================================================</span></span>
<span><span class="co">#&gt; Performance Metrics (with 95% CI):</span></span>
<span><span class="co">#&gt; ============================================================</span></span>
<span><span class="co">#&gt; Sensitivity (Recall)  : 0.867 (0.805 - 0.915)</span></span>
<span><span class="co">#&gt; Specificity           : 0.884 (0.844 - 0.917)</span></span>
<span><span class="co">#&gt; Pos Pred Value (PPV)  : 0.794 (0.728 - 0.851)</span></span>
<span><span class="co">#&gt; Neg Pred Value (NPV)  : 0.928 (0.893 - 0.954)</span></span>
<span><span class="co">#&gt; Accuracy              : 0.878 (0.846 - 0.906)</span></span>
<span><span class="co">#&gt; Prevalence            : 0.340 (0.298 - 0.384)</span></span>
<span><span class="co">#&gt; ------------------------------------------------------------</span></span>
<span><span class="co">#&gt; Likelihood Ratio +    : 7.495</span></span>
<span><span class="co">#&gt; Likelihood Ratio -    : 0.151</span></span>
<span><span class="co">#&gt; Youden Index          : 0.751</span></span>
<span><span class="co">#&gt; F1 Score              : 0.829</span></span></code></pre></div>
<p>You can quickly visualize the Confusion Matrix using the generic
<code><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot()</a></code> function on the result object.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">results</span>, main <span class="op">=</span> <span class="st">"Rapid Test Performance"</span><span class="op">)</span></span></code></pre></div>
<p><img src="tb_tutorial_files/figure-html/unnamed-chunk-12-1.png" width="700"></p>
<p>The area of each quadrant reflects the number of observations. Large
areas in the true positive and true negative quadrants indicate good
performance.</p>
</div>
<div class="section level3">
<h3 id="extracting-results-for-reports">Extracting Results for Reports<a class="anchor" aria-label="anchor" href="#extracting-results-for-reports"></a>
</h3>
<p>Need the metrics in a table format for a manuscript or report? You
can transform the results of <code>diag_test</code> into a dataframe
containing all the important metrics:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">metrics_table</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span><span class="va">results</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">metrics_table</span><span class="op">)</span></span>
<span><span class="co">#&gt;                  Metric  Estimate   LowerCI   UpperCI</span></span>
<span><span class="co">#&gt; 1  Sensitivity (Recall) 0.8666667 0.8051165 0.9145175</span></span>
<span><span class="co">#&gt; 2           Specificity 0.8843750 0.8441612 0.9172694</span></span>
<span><span class="co">#&gt; 3  Pos Pred Value (PPV) 0.7944444 0.7279793 0.8509482</span></span>
<span><span class="co">#&gt; 4  Neg Pred Value (NPV) 0.9278689 0.8928271 0.9542465</span></span>
<span><span class="co">#&gt; 5              Accuracy 0.8783505 0.8459002 0.9060915</span></span>
<span><span class="co">#&gt; 6            Prevalence 0.3402062 0.2980962 0.3842785</span></span>
<span><span class="co">#&gt; 7    Likelihood Ratio + 7.4954955        NA        NA</span></span>
<span><span class="co">#&gt; 8    Likelihood Ratio - 0.1507656        NA        NA</span></span>
<span><span class="co">#&gt; 9          Youden Index 0.7510417        NA        NA</span></span>
<span><span class="co">#&gt; 10             F1 Score 0.8289855        NA        NA</span></span></code></pre></div>
<hr>
</div>
</div>
<div class="section level2">
<h2 id="part-3-regression-tables-with-regtab">Part 3: Regression Tables with <code>regtab()</code><a class="anchor" aria-label="anchor" href="#part-3-regression-tables-with-regtab"></a>
</h2>
<p>You’ve described your data and evaluated your diagnostic test. Now
you want to understand which factors predict disease, healthcare
utilization, or other outcomes and you have <em>multiple</em> outcomes
to examine. This is when we use <code><a href="../reference/regtab.html">regtab()</a></code>.</p>
<p>Let’s say we want to understand healthcare utilization in our
population. Specifically, we’ll examine three outcomes:</p>
<ul>
<li>
<strong>Primary care visits</strong> (outcome1)</li>
<li>
<strong>Specialist visits</strong> (outcome2)</li>
<li>
<strong>Emergency department visits</strong> (outcome3)</li>
</ul>
<p>All are count variables, so we’ll use <strong>Poisson
regression</strong>. And we want to know: how do age, sex, disease
status, and smoking affect each type of visit?</p>
<div class="section level4">
<h4 id="poison-regression-count-outcomes">Poison Regression: Count outcomes<a class="anchor" aria-label="anchor" href="#poison-regression-count-outcomes"></a>
</h4>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">healthcare_model</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/regtab.html">regtab</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">epitabl</span>,</span>
<span>  outcomes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"outcome1"</span>, <span class="st">"outcome2"</span>, <span class="st">"outcome3"</span><span class="op">)</span>,</span>
<span>  predictors <span class="op">=</span> <span class="op">~</span> <span class="va">age</span> <span class="op">+</span> <span class="va">sex</span> <span class="op">+</span> <span class="va">disease</span> <span class="op">+</span> <span class="va">smoking</span>,</span>
<span>  family <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/family.html" class="external-link">poisson</a></span><span class="op">(</span>link <span class="op">=</span> <span class="st">"log"</span><span class="op">)</span>,</span>
<span>  robust <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>    outcome1 <span class="op">=</span> <span class="st">"Primary Care"</span>,</span>
<span>    outcome2 <span class="op">=</span> <span class="st">"Specialist"</span>,</span>
<span>    outcome3 <span class="op">=</span> <span class="st">"Emergency Dept"</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="co">#&gt; Auto-detected family 'poisson': Coefficients will be exponentiated.</span></span>
<span>  </span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">healthcare_model</span><span class="op">)</span></span>
<span><span class="co">#&gt;         Variable             Result  Outcome</span></span>
<span><span class="co">#&gt; 1    (Intercept) 2.33 (1.91 - 2.83) outcome1</span></span>
<span><span class="co">#&gt; 2            age 1.01 (1.00 - 1.01) outcome1</span></span>
<span><span class="co">#&gt; 3        sexMale 1.02 (0.94 - 1.11) outcome1</span></span>
<span><span class="co">#&gt; 4     diseaseYes 1.62 (1.49 - 1.77) outcome1</span></span>
<span><span class="co">#&gt; 5  smokingFormer 0.99 (0.90 - 1.09) outcome1</span></span>
<span><span class="co">#&gt; 6 smokingCurrent 1.00 (0.90 - 1.12) outcome1</span></span></code></pre></div>
<p>The function fitted three separate Poisson regression models (one per
outcome) using the same predictors and outputs IIRs and CIs</p>
</div>
<div class="section level4">
<h4 id="logistic-regression-binary-outcomes">Logistic Regression: Binary Outcomes<a class="anchor" aria-label="anchor" href="#logistic-regression-binary-outcomes"></a>
</h4>
<p>Now, let’s look at risk factors for Hospitalization (Binary:
Yes/No).</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">hospital_model</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/regtab.html">regtab</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">epitabl</span>,</span>
<span>  outcomes <span class="op">=</span> <span class="st">"hospitalized"</span>,</span>
<span>  predictors <span class="op">=</span> <span class="op">~</span> <span class="va">age</span> <span class="op">+</span> <span class="va">disease</span> <span class="op">+</span> <span class="va">smoking</span> <span class="op">+</span> <span class="va">comorbidity_score</span>,</span>
<span>  family <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/family.html" class="external-link">binomial</a></span><span class="op">(</span>link <span class="op">=</span> <span class="st">"logit"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; Auto-detected family 'binomial': Coefficients will be exponentiated.</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">hospital_model</span><span class="op">)</span></span>
<span><span class="co">#&gt;            Variable             Result      Outcome</span></span>
<span><span class="co">#&gt; 1       (Intercept) 0.01 (0.00 - 0.03) hospitalized</span></span>
<span><span class="co">#&gt; 2               age 1.05 (1.02 - 1.07) hospitalized</span></span>
<span><span class="co">#&gt; 3        diseaseYes 3.01 (1.76 - 5.13) hospitalized</span></span>
<span><span class="co">#&gt; 4     smokingFormer 0.58 (0.30 - 1.12) hospitalized</span></span>
<span><span class="co">#&gt; 5    smokingCurrent 2.74 (1.51 - 4.96) hospitalized</span></span>
<span><span class="co">#&gt; 6 comorbidity_score 1.25 (0.83 - 1.89) hospitalized</span></span></code></pre></div>
<p>The coefficients are now <strong>odds ratios</strong></p>
</div>
<div class="section level4">
<h4 id="including-p-values">Including P-values<a class="anchor" aria-label="anchor" href="#including-p-values"></a>
</h4>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">hospital_model_p</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/regtab.html">regtab</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">epitabl</span>,</span>
<span>  outcomes <span class="op">=</span> <span class="st">"hospitalized"</span>,</span>
<span>  predictors <span class="op">=</span> <span class="op">~</span> <span class="va">age</span> <span class="op">+</span> <span class="va">disease</span> <span class="op">+</span> <span class="va">smoking</span> <span class="op">+</span> <span class="va">comorbidity_score</span>,</span>
<span>  family <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/family.html" class="external-link">binomial</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  p_values <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; Auto-detected family 'binomial': Coefficients will be exponentiated.</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">hospital_model_p</span><span class="op">)</span></span>
<span><span class="co">#&gt;            Variable             Result      Outcome P_Value</span></span>
<span><span class="co">#&gt; 1       (Intercept) 0.01 (0.00 - 0.03) hospitalized  &lt;0.001</span></span>
<span><span class="co">#&gt; 2               age 1.05 (1.02 - 1.07) hospitalized  &lt;0.001</span></span>
<span><span class="co">#&gt; 3        diseaseYes 3.01 (1.76 - 5.13) hospitalized  &lt;0.001</span></span>
<span><span class="co">#&gt; 4     smokingFormer 0.58 (0.30 - 1.12) hospitalized   0.106</span></span>
<span><span class="co">#&gt; 5    smokingCurrent 2.74 (1.51 - 4.96) hospitalized  &lt;0.001</span></span>
<span><span class="co">#&gt; 6 comorbidity_score 1.25 (0.83 - 1.89) hospitalized   0.288</span></span></code></pre></div>
<p>Now each outcome gets both an estimate column and a p-value
column.</p>
</div>
<div class="section level4">
<h4 id="linear-gaussian-regression-continuous-outcomes">Linear (Gaussian) Regression: Continuous Outcomes<a class="anchor" aria-label="anchor" href="#linear-gaussian-regression-continuous-outcomes"></a>
</h4>
<p>What predicts blood pressure and cholesterol? These are continuous
outcomes, so we use <strong>Gaussian regression</strong>:</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">clinical_model</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/regtab.html">regtab</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">epitabl</span>,</span>
<span>  outcomes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"systolic_bp"</span>, <span class="st">"cholesterol"</span><span class="op">)</span>,</span>
<span>  predictors <span class="op">=</span> <span class="op">~</span> <span class="va">age</span> <span class="op">+</span> <span class="va">sex</span> <span class="op">+</span> <span class="va">bmi</span> <span class="op">+</span> <span class="va">exercise</span> <span class="op">+</span> <span class="va">smoking</span>,</span>
<span>  family <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/family.html" class="external-link">gaussian</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>    systolic_bp <span class="op">=</span> <span class="st">"Systolic BP (mmHg)"</span>,</span>
<span>    cholesterol <span class="op">=</span> <span class="st">"Cholesterol (mg/dL)"</span></span>
<span>  <span class="op">)</span>,</span>
<span>  d <span class="op">=</span> <span class="fl">1</span>  <span class="co"># 1 decimal place</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">clinical_model</span><span class="op">)</span></span>
<span><span class="co">#&gt;           Variable             Result     Outcome</span></span>
<span><span class="co">#&gt; 1      (Intercept) 71.2 (66.0 - 76.3) systolic_bp</span></span>
<span><span class="co">#&gt; 2              age    0.5 (0.4 - 0.6) systolic_bp</span></span>
<span><span class="co">#&gt; 3          sexMale  -1.0 (-2.6 - 0.6) systolic_bp</span></span>
<span><span class="co">#&gt; 4              bmi    0.8 (0.6 - 1.0) systolic_bp</span></span>
<span><span class="co">#&gt; 5 exerciseModerate -5.1 (-6.9 - -3.3) systolic_bp</span></span>
<span><span class="co">#&gt; 6     exerciseHigh -6.5 (-8.8 - -4.2) systolic_bp</span></span>
<span><span class="co">#&gt; 7    smokingFormer   1.1 (-0.8 - 3.0) systolic_bp</span></span>
<span><span class="co">#&gt; 8   smokingCurrent    3.1 (1.0 - 5.2) systolic_bp</span></span></code></pre></div>
<p>These are <strong>linear (</strong>β) <strong>coefficients</strong>
(not exponentiated)</p>
</div>
<div class="section level3">
<h3 id="exporting-your-table">Exporting Your Table<a class="anchor" aria-label="anchor" href="#exporting-your-table"></a>
</h3>
<p>Since regtab() returns a standard data frame, you can easily export
it to CSV or Excel for final formatting. You can also use flextable as
before, though it is not necessary.</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Export to CSV</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/write.table.html" class="external-link">write.csv</a></span><span class="op">(</span><span class="va">clinical_model</span>, <span class="st">"Table2_Regression_Results.csv"</span>, row.names <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="conclusion">Conclusion<a class="anchor" aria-label="anchor" href="#conclusion"></a>
</h2>
<p>The <strong>SimtablR</strong> package brings three essential
epidemiologic tools into a single, coherent framework:</p>
<ul>
<li>
<strong><code><a href="../reference/tb.html">tb()</a></code></strong> eliminates the drudgery of
descriptive table creation</li>
<li>
<strong><code><a href="../reference/diag_test.html">diag_test()</a></code></strong> makes diagnostic test
evaluation straightforward and complete</li>
<li>
<strong><code><a href="../reference/regtab.html">regtab()</a></code></strong> turns multi-outcome
regression into a single function call</li>
</ul>
<p>Each function prioritizes publication-ready output, statistical
rigor, and sensible defaults—so you can focus on the science rather than
the code.</p>
<p>I hope this package saves you time, reduces errors, and makes your
analyses more reproducible. Now go forth and create some excellent
tables.</p>
<p><strong>Happy analyzing!</strong></p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Matheus Trabuco Gonzalez.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
